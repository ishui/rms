<?xml version="1.0"?>
<Entity>
	<Name>CBS</Name>
	<Type>Single</Type>
	<Table>
		<Name>CBS</Name>
		<Column>
			<Name>CostCode</Name>
			<DataType>System.String</DataType>
			<IsKey>true</IsKey>
			<IsAllowNull>false</IsAllowNull>
			<ColumnSize>50</ColumnSize>
		</Column>
		<Column>
			<Name>ProjectCode</Name>
			<DataType>System.String</DataType>
			<IsKey>false</IsKey>
			<IsAllowNull>true</IsAllowNull>
			<ColumnSize>50</ColumnSize>
		</Column>
		<Column>
			<Name>ParentCode</Name>
			<DataType>System.String</DataType>
			<IsKey>false</IsKey>
			<IsAllowNull>true</IsAllowNull>
			<ColumnSize>50</ColumnSize>
		</Column>
		<Column>
			<Name>Deep</Name>
			<DataType>System.Int32</DataType>
			<IsKey>false</IsKey>
			<IsAllowNull>true</IsAllowNull>
			<ColumnSize>4</ColumnSize>
		</Column>
		<Column>
			<Name>CostName</Name>
			<DataType>System.String</DataType>
			<IsKey>false</IsKey>
			<IsAllowNull>true</IsAllowNull>
			<ColumnSize>50</ColumnSize>
		</Column>
		<Column>
			<Name>OutLineNumber</Name>
			<DataType>System.String</DataType>
			<IsKey>false</IsKey>
			<IsAllowNull>true</IsAllowNull>
			<ColumnSize>50</ColumnSize>
		</Column>
		<Column>
			<Name>SortID</Name>
			<DataType>System.String</DataType>
			<IsKey>false</IsKey>
			<IsAllowNull>true</IsAllowNull>
			<ColumnSize>200</ColumnSize>
		</Column>
		<Column>
			<Name>Description</Name>
			<DataType>System.String</DataType>
			<IsKey>false</IsKey>
			<IsAllowNull>true</IsAllowNull>
			<ColumnSize>800</ColumnSize>
		</Column>
		<Column>
			<Name>CostAllocationDescription</Name>
			<DataType>System.String</DataType>
			<IsKey>false</IsKey>
			<IsAllowNull>true</IsAllowNull>
			<ColumnSize>800</ColumnSize>
		</Column>
		<Column>
			<Name>EstimateMark</Name>
			<DataType>System.String</DataType>
			<IsKey>false</IsKey>
			<IsAllowNull>true</IsAllowNull>
			<ColumnSize>100</ColumnSize>
		</Column>
		<Column>
			<Name>MeasurementUnit</Name>
			<DataType>System.String</DataType>
			<IsKey>false</IsKey>
			<IsAllowNull>true</IsAllowNull>
			<ColumnSize>100</ColumnSize>
		</Column>
		<Column>
			<Name>SubjectCode</Name>
			<DataType>System.String</DataType>
			<IsKey>false</IsKey>
			<IsAllowNull>true</IsAllowNull>
			<ColumnSize>50</ColumnSize>
		</Column>
		<Column>
			<Name>UnitPrice</Name>
			<DataType>System.Decimal</DataType>
			<IsKey>false</IsKey>
			<IsAllowNull>true</IsAllowNull>
			<ColumnSize>17</ColumnSize>
		</Column>
		<Column>
			<Name>PriceDescription</Name>
			<DataType>System.String</DataType>
			<IsKey>false</IsKey>
			<IsAllowNull>true</IsAllowNull>
			<ColumnSize>800</ColumnSize>
		</Column>
		<Column>
			<Name>FullCode</Name>
			<DataType>System.String</DataType>
			<IsKey>false</IsKey>
			<IsAllowNull>true</IsAllowNull>
			<ColumnSize>800</ColumnSize>
		</Column>
		<Column>
			<Name>CBSModuleCode</Name>
			<DataType>System.String</DataType>
			<IsKey>false</IsKey>
			<IsAllowNull>true</IsAllowNull>
			<ColumnSize>50</ColumnSize>
		</Column>
		<Column>
			<Name>SubjectSetCode</Name>
			<DataType>System.String</DataType>
			<IsKey>false</IsKey>
			<IsAllowNull>true</IsAllowNull>
			<ColumnSize>50</ColumnSize>
		</Column>
		<Column>
			<Name>IsFixed</Name>
			<DataType>System.Int32</DataType>
			<IsKey>false</IsKey>
			<IsAllowNull>true</IsAllowNull>
			<ColumnSize>4</ColumnSize>
		</Column>
		<Column>
			<Name>Type</Name>
			<DataType>System.String</DataType>
			<IsKey>false</IsKey>
			<IsAllowNull>true</IsAllowNull>
			<ColumnSize>50</ColumnSize>
		</Column>
		<Column>
			<Name>CreateUserCode</Name>
			<DataType>System.String</DataType>
			<IsKey>false</IsKey>
			<IsAllowNull>true</IsAllowNull>
			<ColumnSize>50</ColumnSize>
		</Column>
		<Column>
			<Name>TotalTargetMoney</Name>
			<DataType>System.Decimal</DataType>
			<IsKey>false</IsKey>
			<IsAllowNull>true</IsAllowNull>
			<ColumnSize>17</ColumnSize>
		</Column>
		<Column>
			<Name>TotalBudgetMoney</Name>
			<DataType>System.Decimal</DataType>
			<IsKey>false</IsKey>
			<IsAllowNull>true</IsAllowNull>
			<ColumnSize>17</ColumnSize>
		</Column>
		<Column>
			<Name>BudgetType</Name>
			<DataType>System.String</DataType>
			<IsKey>false</IsKey>
			<IsAllowNull>true</IsAllowNull>
			<ColumnSize>50</ColumnSize>
		</Column>
		<Sql>
			<Name>Select</Name>
			<String>select *, (select count(*) from CBS CBSCount where CBSCount.ParentCode=CBS.CostCode) as ChildCount from CBS where  CostCode=@CostCode</String>
			<CommandType>Text</CommandType>
			<Param>
				<Name>@CostCode</Name>
				<Column>CostCode</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
		</Sql>
		<Sql>
			<Name>SelectAll</Name>
			<String>select *, (select count(*) from CBS CBSCount where CBSCount.ParentCode=CBS.CostCode) as ChildCount from CBS</String>
			<CommandType>Text</CommandType>
		</Sql>
		<Sql>
			<Name>Insert</Name>
			<String> Insert into CBS (  CostCode, ProjectCode, ParentCode, Deep, CostName, OutLineNumber, SortID, Description, CostAllocationDescription, EstimateMark, MeasurementUnit, SubjectCode, UnitPrice, PriceDescription, FullCode, CBSModuleCode, SubjectSetCode, IsFixed, Type, CreateUserCode, TotalTargetMoney, TotalBudgetMoney, BudgetType ) values (  @CostCode, @ProjectCode, @ParentCode, @Deep, @CostName, @OutLineNumber, @SortID, @Description, @CostAllocationDescription, @EstimateMark, @MeasurementUnit, @SubjectCode, @UnitPrice, @PriceDescription, @FullCode, @CBSModuleCode, @SubjectSetCode, @IsFixed, @Type, @CreateUserCode, @TotalTargetMoney, @TotalBudgetMoney, @BudgetType )</String>
			<CommandType>Text</CommandType>
			<Param>
				<Name>@CostCode</Name>
				<Column>CostCode</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@ProjectCode</Name>
				<Column>ProjectCode</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@ParentCode</Name>
				<Column>ParentCode</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@Deep</Name>
				<Column>Deep</Column>
				<SqlDbType>Int</SqlDbType>
			</Param>
			<Param>
				<Name>@CostName</Name>
				<Column>CostName</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@OutLineNumber</Name>
				<Column>OutLineNumber</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@SortID</Name>
				<Column>SortID</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@Description</Name>
				<Column>Description</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@CostAllocationDescription</Name>
				<Column>CostAllocationDescription</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@EstimateMark</Name>
				<Column>EstimateMark</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@MeasurementUnit</Name>
				<Column>MeasurementUnit</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@SubjectCode</Name>
				<Column>SubjectCode</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@UnitPrice</Name>
				<Column>UnitPrice</Column>
				<SqlDbType>Decimal</SqlDbType>
			</Param>
			<Param>
				<Name>@PriceDescription</Name>
				<Column>PriceDescription</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@FullCode</Name>
				<Column>FullCode</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@CBSModuleCode</Name>
				<Column>CBSModuleCode</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@SubjectSetCode</Name>
				<Column>SubjectSetCode</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@IsFixed</Name>
				<Column>IsFixed</Column>
				<SqlDbType>Int</SqlDbType>
			</Param>
			<Param>
				<Name>@Type</Name>
				<Column>Type</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@CreateUserCode</Name>
				<Column>CreateUserCode</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@TotalTargetMoney</Name>
				<Column>TotalTargetMoney</Column>
				<SqlDbType>Decimal</SqlDbType>
			</Param>
			<Param>
				<Name>@TotalBudgetMoney</Name>
				<Column>TotalBudgetMoney</Column>
				<SqlDbType>Decimal</SqlDbType>
			</Param>
			<Param>
				<Name>@BudgetType</Name>
				<Column>BudgetType</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
		</Sql>
		<Sql>
			<Name>Update</Name>
			<String> Update CBS set ProjectCode=@ProjectCode,ParentCode=@ParentCode,Deep=@Deep,CostName=@CostName,OutLineNumber=@OutLineNumber,SortID=@SortID,Description=@Description,CostAllocationDescription=@CostAllocationDescription,EstimateMark=@EstimateMark,MeasurementUnit=@MeasurementUnit,SubjectCode=@SubjectCode,UnitPrice=@UnitPrice,PriceDescription=@PriceDescription,FullCode=@FullCode,CBSModuleCode=@CBSModuleCode,SubjectSetCode=@SubjectSetCode,IsFixed=@IsFixed,Type=@Type,CreateUserCode=@CreateUserCode,TotalTargetMoney=@TotalTargetMoney,TotalBudgetMoney=@TotalBudgetMoney,BudgetType=@BudgetType where  CostCode=@CostCode</String>
			<CommandType>Text</CommandType>
			<Param>
				<Name>@CostCode</Name>
				<Column>CostCode</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@ProjectCode</Name>
				<Column>ProjectCode</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@ParentCode</Name>
				<Column>ParentCode</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@Deep</Name>
				<Column>Deep</Column>
				<SqlDbType>Int</SqlDbType>
			</Param>
			<Param>
				<Name>@CostName</Name>
				<Column>CostName</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@OutLineNumber</Name>
				<Column>OutLineNumber</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@SortID</Name>
				<Column>SortID</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@Description</Name>
				<Column>Description</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@CostAllocationDescription</Name>
				<Column>CostAllocationDescription</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@EstimateMark</Name>
				<Column>EstimateMark</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@MeasurementUnit</Name>
				<Column>MeasurementUnit</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@SubjectCode</Name>
				<Column>SubjectCode</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@UnitPrice</Name>
				<Column>UnitPrice</Column>
				<SqlDbType>Decimal</SqlDbType>
			</Param>
			<Param>
				<Name>@PriceDescription</Name>
				<Column>PriceDescription</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@FullCode</Name>
				<Column>FullCode</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@CBSModuleCode</Name>
				<Column>CBSModuleCode</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@SubjectSetCode</Name>
				<Column>SubjectSetCode</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@IsFixed</Name>
				<Column>IsFixed</Column>
				<SqlDbType>Int</SqlDbType>
			</Param>
			<Param>
				<Name>@Type</Name>
				<Column>Type</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@CreateUserCode</Name>
				<Column>CreateUserCode</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@TotalTargetMoney</Name>
				<Column>TotalTargetMoney</Column>
				<SqlDbType>Decimal</SqlDbType>
			</Param>
			<Param>
				<Name>@TotalBudgetMoney</Name>
				<Column>TotalBudgetMoney</Column>
				<SqlDbType>Decimal</SqlDbType>
			</Param>
			<Param>
				<Name>@BudgetType</Name>
				<Column>BudgetType</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
		</Sql>
		<Sql>
			<Name>Delete</Name>
			<String> Delete from CBS  where  CostCode=@CostCode</String>
			<CommandType>Text</CommandType>
			<Param>
				<Name>@CostCode</Name>
				<Column>CostCode</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
		</Sql>
		<Sql>
			<Name>SelectByProjectCode</Name>
			<String> select  * , (select count(*) from CBS CBSCount where CBSCount.ParentCode=CBS.CostCode) as ChildCount from CBS where ProjectCode=@ProjectCode </String>
			<CommandType>Text</CommandType>
			<Param>
				<Name>@ProjectCode</Name>
				<Column>ProjectCode</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
		</Sql>
		<Sql>
			<Name>SelectChildCount</Name>
			<String> select *, (select count(*) from CBS CBSCount where CBSCount.ParentCode=CBS.CostCode) as ChildCount from CBS</String>
			<CommandType>Text</CommandType>
		</Sql>
		<Sql>
			<Name>SelectCbsInCostCode</Name>
			<String> select * , (select count(*) from CBS CBSCount where CBSCount.ParentCode=CBS.CostCode) as ChildCount from CBS where ProjectCode=@ProjectCode and CostCode in (@AllCostCode) </String>
			<CommandType>Text</CommandType>
			<Param>
				<Name>@AllCostCode</Name>
				<Column>AllCostCode</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@ProjectCode</Name>
				<Column>ProjectCode</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
		</Sql>
		<Sql>
			<Name>SelectCBSByBudgetCostAccountPoint</Name>
			<String> select cbs.*,budgetCost.AccountPoint,( select count(*) from cbs c2 , budgetCost bc2 where bc2.costCode = c2.costCode and budgetCode = @BudgetCode and c2.parentCode = cbs.costCode) as childCount  from budgetCost,cbs where budgetCost.AccountPoint in (1,2) and budgetCost.costCode = cbs.CostCode and budgetCode = @BudgetCode  </String>
			<CommandType>Text</CommandType>
			<Param>
				<Name>@BudgetCode</Name>
				<Column>BudgetCode</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
		</Sql>		
		<Sql>
			<Name>SelectByParentCode</Name>
			<String> select *, (select count(*) from CBS CBSCount where CBSCount.ParentCode=CBS.CostCode) as ChildCount from CBS where ProjectCode=@ProjectCode and ParentCode=@ParentCode </String>
			<CommandType>Text</CommandType>
			<Param>
				<Name>@ProjectCode</Name>
				<Column>ProjectCode</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
			<Param>
				<Name>@ParentCode</Name>
				<Column>ParentCode</Column>
				<SqlDbType>VarChar</SqlDbType>
			</Param>
		</Sql>
	</Table>
</Entity>